{% extends "dashboard/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{{ challenge.name }}{% endblock %}

{% block main %}

<!-- Page title -->
<div class="page-header d-print-none">
    <div class="row align-items-center">
        <div class="col">
            <h2 class="page-title">
                {{ challenge.name }}
            </h2>
        </div>
    </div>
</div>

<div class="row row-cards">
    <div class="col-md-6 col-xl-9">
        <div class="card" style="height: calc(37rem + 8px)">
            <div class="row" style="padding: 20px;">
                <div class="col-3">
                    {% if challenge.logo %}
                    <span class="avatar avatar-xl mb-3 avatar-rounded"
                        style="background-image: url({{ challenge.logo.url }})"></span>
                    {% else %}
                    <span
                        class="avatar avatar-xl mb-3 avatar-rounded">{{challenge.name|make_list|slice:':2'|join:'' }}</span>
                    {% endif %}
                </div>
                <div class="col-4">
                    {% if submitted and enrolled %}
                    <a href="#" class="btn btn-disable" style="margin-top: 20%;">You have submitted the code</a>
                    {% elif enrolled %}
                    <form action="{% url 'challenge:submit' challenge.id %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{ form|crispy }}
                        <button type="submit" class="btn btn-primary">Submit Code</button>
                    </form>
                    {% elif not teams %}
                    <a href="#" class="btn btn-disable" style="margin-top: 20%">Join or make a
                        Team to be able to enrol in challenge</a>
                    {% else %}
                    <a href="{% url 'challenge:enroll' challenge.id %}" class="btn btn-primary"
                        style="margin-top: 20%;">Get Enrolled in challenge</a>
                    {% endif %}
                </div>
            </div>
            <ul class="list-group">
                <li class="list-group-item"><strong>Name</strong> <br> {{challenge.name}}</li>
                <li class="list-group-item"><strong>Description</strong> <br> {{challenge.description}}</li>
                <li class="list-group-item"><strong>Github Link</strong> <br> {{challenge.github_link}}</li>
                <li class="list-group-item"><strong>Website</strong> <br> {{challenge.website}}</li>
            </ul>
        </div>
    </div>
</div>

{% endblock %}